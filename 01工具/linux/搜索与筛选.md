# 搜索与筛选

本节介绍如何在文件中查找特定内容 (`grep`) 以及如何在系统中查找特定文件 (`find`)。

> **前置场景**：
> - 我们需要在代码或日志中查找 "error"。
> - 我们需要找到所有的 `.py` 文件。

## 1. 内容搜索 (`grep`)
**G**lobal **R**egular **E**xpression **P**rint。用于在文件中搜索匹配的文本行。

- **基本搜索**：
  在 `logs/app.log` 中查找包含 "Error" 的行。
  ```bash
  grep "Error" logs/app.log
  ```

- **忽略大小写 (`-i`)**：
  查找 "error", "Error", "ERROR" 等。
  ```bash
  grep -i "error" logs/app.log
  ```

- **递归搜索目录 (`-r`)**：
  在 `src/` 目录及其子目录下所有文件中查找 "import"。
  ```bash
  grep -r "import" src/
  ```

- **显示行号 (`-n`)**：
  ```bash
  grep -n "main" src/main.py
  ```

- **反向查找 (`-v`)**：
  显示**不**包含 "DEBUG" 的行（过滤掉嘈杂信息）。
  ```bash
  grep -v "DEBUG" logs/app.log
  ```

## 2. 文件搜索 (`find`)
用于根据文件名、大小、时间等属性查找文件。

> **注意**：`find` 的路径参数在前，表达式在后。

- **按文件名查找 (`-name`)**：
  在当前目录及子目录中查找名为 `config.py` 的文件。
  ```bash
  find . -name "config.py"
  ```
  使用通配符查找所有 Python 文件：
  ```bash
  find . -name "*.py"
  ```

- **忽略大小写 (`-iname`)**：
  ```bash
  find . -iname "readme.md"
  ```

- **按文件类型查找 (`-type`)**：
  只查找目录 (`d`) 或只查找文件 (`f`)。
  ```bash
  find src/ -type d  # 查找 src 下的所有子目录
  ```

- **按大小查找 (`-size`)**：
  查找大于 100MB 的文件。
  ```bash
  find . -size +100M
  ```

- **结合操作 (`-exec`)**：
  找到文件后执行命令。例如，找到所有 `.tmp` 文件并删除（类似于 `删除.md` 中的高级用法）。
  ```bash
  find . -name "*.tmp" -exec rm {} \;
  ```
