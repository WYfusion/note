# 管道与重定向

Linux 的强大之处在于可以将一个命令的输出作为另一个命令的输入，或者将结果保存到文件中。

## 1. 重定向 (`>`, `>>`)
将命令的结果（标准输出）保存到文件，而不是打印在屏幕上。

### `>` (覆盖写入)
如果文件不存在则创建，如果存在则**清空内容并写入**。

```bash
# 将 ls 的结果保存到 file_list.txt
ls -l > file_list.txt

# 创建一个包含 "Hello" 的文件
echo "Hello World" > hello.txt
```

### `>>` (追加写入)
将内容**追加**到文件末尾，不覆盖原有内容。

```bash
# 将日期追加记录到日志文件
date >> logs/run_history.log
```

## 2. 管道 (`|`)
将前一个命令的**输出**直接传递给后一个命令作为**输入**。就像水管一样连接。

- **分页查看长输出**：
  `ls -R` (递归列出) 输出太长？传给 `less` 慢慢看。
  ```bash
  ls -R | less
  ```

- **筛选输出内容**：
  列出进程，然后只看包含 "python" 的行。
  ```bash
  ps aux | grep "python"
  ```

- **统计数量**：
  统计当前目录下有多少个文件。
  1. `ls` 列出文件
  2. `wc -l` 统计行数
  ```bash
  ls | wc -l
  ```

## 3. 标准错误重定向 (`2>`)
默认情况下，`>` 只重定向标准输出 (Standard Output)，不包含错误信息。

- **保存错误信息**：
  ```bash
  # 假设 run.py 会报错
  python run.py 2> error.log
  ```

- **同时保存输出和错误 (`2>&1`)**：
  将标准错误 (2) 重定向到标准输出 (1) 的位置。
  ```bash
  # 常用于后台任务，将所有日志打入同一个文件
  python main.py > all_output.log 2>&1
  ```
