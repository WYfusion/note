# å·®åˆ†éº¦å…‹é£é˜µåˆ—

## 1. æ¦‚è¿°

**å·®åˆ†éº¦å…‹é£é˜µåˆ— (Differential Microphone Array, DMA)** æ˜¯ä¸€ç±»ç‰¹æ®Šçš„æ³¢æŸå½¢æˆå™¨ï¼Œé€šè¿‡å¯¹ç›¸é‚»éº¦å…‹é£ä¿¡å·è¿›è¡Œå·®åˆ†è¿ç®—ï¼Œå®ç°é«˜æŒ‡å‘æ€§ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯æ¨¡æ‹Ÿå£°å­¦ä¸­çš„**æ¢¯åº¦ä¼ æ„Ÿå™¨**ã€‚

### 1.1 åŸºæœ¬åŸç†

å·®åˆ†é˜µåˆ—åˆ©ç”¨ç›¸é‚»éº¦å…‹é£é—´çš„**å‹åŠ›å·®**æˆ–**å‹åŠ›æ¢¯åº¦**æ¥å¢å¼ºæŒ‡å‘æ€§ï¼š

```
ä¸€é˜¶å·®åˆ†ï¼š  ğŸ¤ â†dâ†’ ğŸ¤
            pâ‚    pâ‚‚
            â†“      â†“
         Î”p = pâ‚‚ - pâ‚

äºŒé˜¶å·®åˆ†ï¼š  ğŸ¤ â†dâ†’ ğŸ¤ â†dâ†’ ğŸ¤
            pâ‚    pâ‚‚    pâ‚ƒ
```

### 1.2 ä¼˜åŠ¿

1. **å°å°ºå¯¸é«˜æŒ‡å‘æ€§**ï¼šé˜µåˆ—å°ºå¯¸è¿œå°äºæ³¢é•¿æ—¶ä»æœ‰é«˜æŒ‡å‘æ€§
2. **ä½é¢‘æ€§èƒ½å¥½**ï¼šé€‚åˆè¯­éŸ³é¢‘æ®µï¼ˆ100-8000 Hzï¼‰
3. **ç»“æ„ç®€å•**ï¼šåªéœ€2-3ä¸ªéº¦å…‹é£

### 1.3 æŒ‘æˆ˜

1. **ç™½å™ªå£°å¢ç›Šä½**ï¼šå¯¹ä¼ æ„Ÿå™¨å™ªå£°æ•æ„Ÿ
2. **éœ€è¦ç²¾ç¡®åŒ¹é…**ï¼šéº¦å…‹é£é—´ç›¸ä½/å¹…åº¦è¯¯å·®å½±å“å¤§
3. **åŠ¨æ€èŒƒå›´å—é™**ï¼šå·®åˆ†æ”¾å¤§å™ªå£°

---

## 2. ä¸€é˜¶å·®åˆ†é˜µåˆ—

### 2.1 æ•°å­¦æ¨¡å‹

**æ—¶åŸŸæ¨¡å‹**ï¼š
è€ƒè™‘ä¸¤ä¸ªé—´è·ä¸º $d$ çš„éº¦å…‹é£ï¼Œå£°æºä½äºæ–¹å‘ $\theta$ï¼š

$$x_1(t) = s(t)$$
$$x_2(t) = s(t - \tau(\theta))$$

å…¶ä¸­æ—¶å»¶ï¼š
$$\tau(\theta) = \frac{d\cos\theta}{c}$$

**ä¸€é˜¶å·®åˆ†è¾“å‡º**ï¼š
$$y(t) = x_2(t) - x_1(t) = s(t - \tau(\theta)) - s(t)$$

### 2.2 é¢‘åŸŸåˆ†æ

å¯¹æ—¶åŸŸä¿¡å·è¿›è¡Œå‚…é‡Œå¶å˜æ¢ï¼š

$$Y(\omega) = X_2(\omega) - X_1(\omega)$$
$$= S(\omega)e^{-j\omega\tau(\theta)} - S(\omega)$$
$$= S(\omega)(e^{-j\omega\tau(\theta)} - 1)$$

**é˜µåˆ—å“åº”**ï¼š
$$H(\theta, \omega) = e^{-j\omega\tau(\theta)} - 1$$

åˆ©ç”¨æ¬§æ‹‰å…¬å¼ï¼š
$$e^{-j\omega\tau} = \cos(\omega\tau) - j\sin(\omega\tau)$$

å› æ­¤ï¼š
$$H(\theta, \omega) = \cos(\omega\tau) - 1 - j\sin(\omega\tau)$$

**å¹…åº¦å“åº”**ï¼š
$$|H(\theta, \omega)| = \sqrt{(\cos(\omega\tau) - 1)^2 + \sin^2(\omega\tau)}$$

åˆ©ç”¨ä¸‰è§’æ’ç­‰å¼ï¼š
$$(\cos x - 1)^2 + \sin^2 x = 2 - 2\cos x = 2(1 - \cos x) = 4\sin^2(x/2)$$

å¾—åˆ°ï¼š
$$|H(\theta, \omega)| = 2\left|\sin\left(\frac{\omega\tau(\theta)}{2}\right)\right|$$

ä»£å…¥ $\tau(\theta) = \frac{d\cos\theta}{c}$ï¼š

$$\boxed{|H(\theta, \omega)| = 2\left|\sin\left(\frac{\omega d\cos\theta}{2c}\right)\right|}$$

### 2.3 æŒ‡å‘æ€§åˆ†æ

**æ­£å‰æ–¹** ($\theta = 0Â°$)ï¼š
$$|H(0Â°, \omega)| = 2\left|\sin\left(\frac{\omega d}{2c}\right)\right|$$

**ä¾§å‘** ($\theta = 90Â°$)ï¼š
$$|H(90Â°, \omega)| = 2\left|\sin(0)\right| = 0$$

**åæ–¹** ($\theta = 180Â°$)ï¼š
$$|H(180Â°, \omega)| = 2\left|\sin\left(-\frac{\omega d}{2c}\right)\right| = 2\left|\sin\left(\frac{\omega d}{2c}\right)\right|$$

**ç»“è®º**ï¼šä¸€é˜¶å·®åˆ†é˜µåˆ—å‘ˆç°**8å­—å½¢æŒ‡å‘æ€§**ï¼ˆåŒå‘æ€§ï¼‰ã€‚

### 2.4 å½’ä¸€åŒ–æ³¢æŸå›¾

å½’ä¸€åŒ–åˆ°æ­£å‰æ–¹å“åº”ä¸º1ï¼š

$$B(\theta) = \frac{|H(\theta, \omega)|}{|H(0Â°, \omega)|} = \frac{\sin\left(\frac{\omega d\cos\theta}{2c}\right)}{\sin\left(\frac{\omega d}{2c}\right)}$$

**ä½é¢‘è¿‘ä¼¼** ($\omega d \ll c$)ï¼š

åˆ©ç”¨ $\sin x \approx x$ å½“ $x \ll 1$ï¼š

$$B(\theta) \approx \frac{\frac{\omega d\cos\theta}{2c}}{\frac{\omega d}{2c}} = \cos\theta$$

è¿™æ­£æ˜¯**å¶æå­**ï¼ˆdipoleï¼‰çš„æŒ‡å‘æ€§ï¼

### 2.5 ç™½å™ªå£°å¢ç›Š

å¯¹äºç©ºé—´ç™½å™ªå£°ï¼Œç™½å™ªå£°å¢ç›Šä¸ºï¼š

$$WNG = \frac{|H(\theta_0, \omega)|^2}{\int_0^{2\pi} |H(\theta, \omega)|^2 d\theta}$$

å¯¹äºä¸€é˜¶å·®åˆ†ï¼ˆ$\theta_0 = 0Â°$ï¼‰ï¼š

$$WNG_{1st} = \frac{4\sin^2\left(\frac{\omega d}{2c}\right)}{\int_0^{2\pi} 4\sin^2\left(\frac{\omega d\cos\theta}{2c}\right) d\theta}$$

**ä½é¢‘è¿‘ä¼¼**ï¼š
$$WNG_{1st} \approx \frac{(\omega d/c)^2}{\int_0^{2\pi} (\omega d\cos\theta/2c)^2 d\theta} = \frac{(\omega d/c)^2}{\pi(\omega d/2c)^2} = \frac{4}{\pi}$$

$$\boxed{WNG_{1st, dB} \approx 10\log_{10}\left(\frac{4}{\pi}\right) \approx 1.05 \text{ dB}}$$

**ç»“è®º**ï¼šä¸€é˜¶å·®åˆ†çš„ç™½å™ªå£°å¢ç›Šå¾ˆä½ï¼Œå¯¹ä¼ æ„Ÿå™¨å™ªå£°æ•æ„Ÿã€‚

---

## 3. äºŒé˜¶å·®åˆ†é˜µåˆ—

### 3.1 æ•°å­¦æ¨¡å‹

ä¸‰ä¸ªç­‰é—´è·éº¦å…‹é£ï¼Œé—´è·ä¸º $d$ï¼š

$$x_1(t) = s(t + \tau)$$
$$x_2(t) = s(t)$$
$$x_3(t) = s(t - \tau)$$

å…¶ä¸­ $\tau = \frac{d\cos\theta}{c}$ã€‚

**äºŒé˜¶å·®åˆ†**ï¼š
$$y(t) = x_3(t) - 2x_2(t) + x_1(t)$$

è¿™æ˜¯**äºŒé˜¶å¯¼æ•°**çš„ç¦»æ•£è¿‘ä¼¼ã€‚

### 3.2 é¢‘åŸŸåˆ†æ

$$Y(\omega) = X_3(\omega) - 2X_2(\omega) + X_1(\omega)$$
$$= S(\omega)(e^{-j\omega\tau} - 2 + e^{j\omega\tau})$$
$$= S(\omega) \cdot 2(\cos(\omega\tau) - 1)$$

åˆ©ç”¨ä¸‰è§’æ’ç­‰å¼ $\cos x - 1 = -2\sin^2(x/2)$ï¼š

$$Y(\omega) = -4S(\omega)\sin^2\left(\frac{\omega\tau}{2}\right)$$

**å¹…åº¦å“åº”**ï¼š
$$|H(\theta, \omega)| = 4\sin^2\left(\frac{\omega d\cos\theta}{2c}\right)$$

**å½’ä¸€åŒ–**ï¼š
$$\boxed{B(\theta) = \frac{\sin^2\left(\frac{\omega d\cos\theta}{2c}\right)}{\sin^2\left(\frac{\omega d}{2c}\right)}}$$

### 3.3 ä½é¢‘è¿‘ä¼¼

å½“ $\omega d \ll c$ æ—¶ï¼š

$$B(\theta) \approx \frac{(\omega d\cos\theta/2c)^2}{(\omega d/2c)^2} = \cos^2\theta$$

è¿™æ˜¯**å››æå­**ï¼ˆquadrupoleï¼‰çš„æŒ‡å‘æ€§ï¼

### 3.4 æŒ‡å‘æ€§å¯¹æ¯”

| é˜µåˆ—ç±»å‹ | ä½é¢‘æŒ‡å‘æ€§ | é›¶ç‚¹ | ä¸»ç“£å®½åº¦ |
|----------|------------|------|----------|
| å…¨å‘ | 1 | æ—  | 360Â° |
| ä¸€é˜¶å·®åˆ† | $\cos\theta$ | 90Â°, 270Â° | ~180Â° |
| äºŒé˜¶å·®åˆ† | $\cos^2\theta$ | 90Â°, 270Â° | ~90Â° |

### 3.5 ç™½å™ªå£°å¢ç›Š

äºŒé˜¶å·®åˆ†çš„ç™½å™ªå£°å¢ç›Šæ›´ä½ï¼š

$$\boxed{WNG_{2nd, dB} \approx -4.8 \text{ dB}}$$

æ¯”ä¸€é˜¶å·®åˆ†ä½çº¦6 dBã€‚

---

## 4. ç«¯å°„å¼å·®åˆ†é˜µåˆ—

### 4.1 é…ç½®

éº¦å…‹é£æ²¿å£°æºæ–¹å‘æ’åˆ—ï¼ˆendfire configurationï¼‰ï¼š

```
å£°æº â†’ ğŸ¤ â†dâ†’ ğŸ¤ â†dâ†’ ğŸ¤
       1      2      3
```

### 4.2 ä¸€é˜¶ç«¯å°„

**æƒé‡è®¾è®¡**ï¼š
$$\mathbf{w} = [1, -e^{j\omega d/c}]^T$$

**é˜µåˆ—å“åº”**ï¼š
$$H(\theta, \omega) = 1 - e^{j\omega d(\cos\theta - 1)/c}$$

**å¿ƒå½¢æŒ‡å‘æ€§**ï¼ˆcardioidï¼‰ï¼š

ä½é¢‘è¿‘ä¼¼ä¸‹ï¼š
$$B(\theta) \approx \frac{1 + \cos\theta}{2}$$

**ç‰¹ç‚¹**ï¼š
- å‰å‘å¢ç›Šæœ€å¤§
- åå‘é›¶ç‚¹ï¼ˆ$\theta = 180Â°$ï¼‰
- å•å‘æ€§å¥½

### 4.3 è¶…å¿ƒå½¢æŒ‡å‘æ€§

é€šè¿‡è°ƒæ•´æƒé‡ï¼Œå¯ä»¥è·å¾—ä¸åŒçš„æŒ‡å‘æ€§ï¼š

$$\mathbf{w} = [1, -\alpha e^{j\omega d/c}]^T$$

- $\alpha = 1$ï¼šå¿ƒå½¢ï¼ˆcardioidï¼‰
- $\alpha = 0.75$ï¼šè¶…å¿ƒå½¢ï¼ˆsupercardioidï¼‰
- $\alpha = 0.5$ï¼šè¶…æŒ‡å‘æ€§ï¼ˆhypercardioidï¼‰

**è¶…å¿ƒå½¢**ï¼š
$$B(\theta) = 0.25 + 0.75\cos\theta$$

**è¶…æŒ‡å‘æ€§**ï¼š
$$B(\theta) = 0.5 + 0.5\cos\theta$$

---

## 5. é²æ£’å·®åˆ†é˜µåˆ—è®¾è®¡

### 5.1 ç™½å™ªå£°å¢ç›Šçº¦æŸ

å·®åˆ†é˜µåˆ—çš„ä¸»è¦é—®é¢˜æ˜¯ç™½å™ªå£°å¢ç›Šä½ã€‚è§£å†³æ–¹æ³•ï¼š

**çº¦æŸä¼˜åŒ–**ï¼š
$$\min_{\mathbf{w}} \mathbf{w}^H\mathbf{\Gamma}\mathbf{w} \quad \text{s.t.} \quad \mathbf{w}^H\mathbf{w} \geq \gamma$$

å…¶ä¸­ $\gamma$ æ˜¯æœ€å°ç™½å™ªå£°å¢ç›Šã€‚

### 5.2 æ­£åˆ™åŒ–å·®åˆ†

åœ¨å·®åˆ†è¿ç®—ä¸­åŠ å…¥æ­£åˆ™åŒ–é¡¹ï¼š

$$y(t) = x_2(t) - \alpha x_1(t)$$

å…¶ä¸­ $\alpha < 1$ é™ä½å¯¹å™ªå£°çš„æ•æ„Ÿæ€§ã€‚

**é¢‘åŸŸ**ï¼š
$$H(\omega) = 1 - \alpha e^{-j\omega\tau}$$

é€‰æ‹© $\alpha$ ä½¿å¾—ç™½å™ªå£°å¢ç›Šæ»¡è¶³è¦æ±‚ã€‚

### 5.3 é¢‘ç‡ä¾èµ–æƒé‡

ä¸åŒé¢‘ç‡ä½¿ç”¨ä¸åŒçš„å·®åˆ†ç³»æ•°ï¼š

$$\alpha(\omega) = \begin{cases}
1, & \omega > \omega_c \\
\omega/\omega_c, & \omega \leq \omega_c
\end{cases}$$

ä½é¢‘å‡å°å·®åˆ†å¼ºåº¦ï¼Œæé«˜é²æ£’æ€§ã€‚

---

## 6. å®é™…è®¾è®¡è€ƒè™‘

### 6.1 éº¦å…‹é£é—´è·é€‰æ‹©

**å‡†åˆ™**ï¼š
$$d < \frac{\lambda_{min}}{2} = \frac{c}{2f_{max}}$$

å¯¹äºè¯­éŸ³ï¼ˆ$f_{max} = 8$ kHzï¼‰ï¼š
$$d < \frac{343}{2 \times 8000} \approx 2.1 \text{ cm}$$

**å®é™…é€‰æ‹©**ï¼š$d = 1-2$ cm

### 6.2 éº¦å…‹é£åŒ¹é…

å·®åˆ†é˜µåˆ—å¯¹éº¦å…‹é£ä¸åŒ¹é…æå…¶æ•æ„Ÿã€‚

**ç›¸ä½è¯¯å·®å½±å“**ï¼š
è®¾ç›¸ä½è¯¯å·®ä¸º $\Delta\phi$ï¼Œåˆ™è¾“å‡ºä¿¡å™ªæ¯”ä¸‹é™ï¼š

$$\Delta SNR = -20\log_{10}\left|\frac{\Delta\phi}{\omega\tau}\right|$$

**è¦æ±‚**ï¼šç›¸ä½åŒ¹é… < 1Â°ï¼Œå¹…åº¦åŒ¹é… < 0.5 dB

### 6.3 åŠ¨æ€èŒƒå›´

å·®åˆ†è¿ç®—ä¼šæ”¾å¤§ä½é¢‘å™ªå£°ã€‚éœ€è¦ï¼š

1. **é«˜é€šæ»¤æ³¢**ï¼šå»é™¤DCå’Œæä½é¢‘
2. **åŠ¨æ€èŒƒå›´å‹ç¼©**ï¼šé™åˆ¶è¾“å‡ºå¹…åº¦
3. **è‡ªåŠ¨å¢ç›Šæ§åˆ¶**ï¼šé€‚åº”ä¸åŒå£°å‹çº§

---

## 7. Pythonå®ç°

```python
import numpy as np

class DifferentialArray:
    def __init__(self, d, c=343, order=1):
        """
        å·®åˆ†éº¦å…‹é£é˜µåˆ—
        
        å‚æ•°:
            d: éº¦å…‹é£é—´è· (m)
            c: å£°é€Ÿ (m/s)
            order: å·®åˆ†é˜¶æ•° (1 or 2)
        """
        self.d = d
        self.c = c
        self.order = order
        
    def steering_vector(self, theta, f):
        """è®¡ç®—å¯¼å‘çŸ¢é‡"""
        tau = self.d * np.cos(theta) / self.c
        omega = 2 * np.pi * f
        
        if self.order == 1:
            # ä¸¤ä¸ªéº¦å…‹é£
            d = np.array([1, np.exp(-1j * omega * tau)])
        elif self.order == 2:
            # ä¸‰ä¸ªéº¦å…‹é£
            d = np.array([
                np.exp(1j * omega * tau),
                1,
                np.exp(-1j * omega * tau)
            ])
        return d
    
    def weights(self, f, alpha=1.0):
        """è®¡ç®—å·®åˆ†æƒé‡"""
        if self.order == 1:
            w = np.array([1, -alpha])
        elif self.order == 2:
            w = np.array([1, -2, 1])
        return w
    
    def beam_pattern(self, f, theta_range=np.linspace(0, 2*np.pi, 360)):
        """è®¡ç®—æ³¢æŸå›¾"""
        w = self.weights(f)
        B = []
        
        for theta in theta_range:
            d = self.steering_vector(theta, f)
            response = np.abs(np.dot(w.conj(), d))
            B.append(response)
        
        B = np.array(B)
        # å½’ä¸€åŒ–
        B = B / np.max(B)
        return theta_range, B
    
    def white_noise_gain(self, f):
        """è®¡ç®—ç™½å™ªå£°å¢ç›Š"""
        w = self.weights(f)
        wng = np.abs(np.dot(w.conj(), w))
        wng_db = 10 * np.log10(wng)
        return wng_db

# ä½¿ç”¨ç¤ºä¾‹
dma = DifferentialArray(d=0.02, order=1)
theta, B = dma.beam_pattern(f=1000)
wng = dma.white_noise_gain(f=1000)

print(f"ç™½å™ªå£°å¢ç›Š: {wng:.2f} dB")
```

---

## 8. åº”ç”¨åœºæ™¯

### 8.1 åŠ©å¬å™¨

**ä¼˜åŠ¿**ï¼š
- å°å°ºå¯¸ï¼ˆ1-2 cmé—´è·ï¼‰
- ä½é¢‘æŒ‡å‘æ€§å¥½
- é€‚åˆè¯­éŸ³é¢‘æ®µ

**é…ç½®**ï¼š
- 2ä¸ªéº¦å…‹é£
- ä¸€é˜¶å·®åˆ†æˆ–å¿ƒå½¢
- è‡ªé€‚åº”æ··åˆå…¨å‘/æŒ‡å‘æ€§

### 8.2 æ‰‹æœº/å¹³æ¿

**ä¼˜åŠ¿**ï¼š
- åˆ©ç”¨ç°æœ‰éº¦å…‹é£
- æ— éœ€é¢å¤–ç©ºé—´
- æˆæœ¬ä½

**é…ç½®**ï¼š
- 2-3ä¸ªéº¦å…‹é£
- ç«¯å°„å¼é…ç½®
- ç»“åˆå•é€šé“é™å™ª

### 8.3 ä¼šè®®éº¦å…‹é£

**ä¼˜åŠ¿**ï¼š
- æ¡Œé¢æ”¾ç½®
- æŠ‘åˆ¶é”®ç›˜å™ªå£°
- å®šå‘æ‹¾éŸ³

**é…ç½®**ï¼š
- 2-4ä¸ªéº¦å…‹é£
- å¿ƒå½¢æˆ–è¶…å¿ƒå½¢
- è‡ªé€‚åº”é›¶ç‚¹æ§åˆ¶

---

## 9. ä¼˜ç¼ºç‚¹æ€»ç»“

### 9.1 ä¼˜ç‚¹

1. **å°å°ºå¯¸é«˜æŒ‡å‘æ€§**ï¼š$d \ll \lambda$ æ—¶ä»æœ‰æŒ‡å‘æ€§
2. **ä½é¢‘æ€§èƒ½å¥½**ï¼šé€‚åˆè¯­éŸ³åº”ç”¨
3. **ç»“æ„ç®€å•**ï¼š2-3ä¸ªéº¦å…‹é£å³å¯
4. **æˆæœ¬ä½**ï¼šç¡¬ä»¶è¦æ±‚ä½

### 9.2 ç¼ºç‚¹

1. **ç™½å™ªå£°å¢ç›Šä½**ï¼šå¯¹ä¼ æ„Ÿå™¨å™ªå£°æ•æ„Ÿ
2. **åŒ¹é…è¦æ±‚é«˜**ï¼šéœ€è¦ç²¾ç¡®æ ¡å‡†
3. **åŠ¨æ€èŒƒå›´å—é™**ï¼šå·®åˆ†æ”¾å¤§å™ªå£°
4. **é¢‘ç‡ä¾èµ–**ï¼šé«˜é¢‘æ€§èƒ½ä¸‹é™

---

## 10. ä¸å…¶ä»–æ–¹æ³•å¯¹æ¯”

| ç‰¹æ€§ | å·®åˆ†é˜µåˆ— | å»¶è¿Ÿæ±‚å’Œ | MVDR |
|------|----------|----------|------|
| é˜µåˆ—å°ºå¯¸ | å¾ˆå° | ä¸­ç­‰ | ä¸­ç­‰ |
| ä½é¢‘æ€§èƒ½ | å¥½ | å·® | ä¸­ |
| ç™½å™ªå£°å¢ç›Š | ä½ | é«˜ | ä¸­ |
| åŒ¹é…è¦æ±‚ | é«˜ | ä½ | ä¸­ |
| è®¡ç®—å¤æ‚åº¦ | ä½ | ä½ | é«˜ |
| è‡ªé€‚åº”æ€§ | æ—  | æ—  | æœ‰ |

**é€‰æ‹©å»ºè®®**ï¼š
- å°å°ºå¯¸è®¾å¤‡ â†’ å·®åˆ†é˜µåˆ—
- è¿œåœºæ‹¾éŸ³ â†’ å»¶è¿Ÿæ±‚å’Œæˆ–MVDR
- å¼ºå™ªå£°ç¯å¢ƒ â†’ MVDRæˆ–GSC
