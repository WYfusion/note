### 一、先搞懂：贝叶斯公式解决什么问题？
在概率统计中，我们常遇到两类问题，贝叶斯公式专门解决第二类 “逆概率” 问题：
1. **正向概率**：已知 “原因” 的概率，求 “结果” 的概率。 例：已知 “箱子里有 3 个红球、2 个白球”（原因），求 “随机摸 1 个是红球”（结果）的概率 —— 这是基础概率，直接计算 $P(红球) = 3/5$ 即可。
2. **逆概率**：已知 “结果” 的概率，反推 “原因” 的概率。 例：已知 “随机摸 1 个是红球”（结果），求 “这个红球来自 A 箱子（A 箱：2 红 1 白；B 箱：1 红 2 白）”（原因）的概率 —— 这就是逆概率，**贝叶斯公式的核心目标**。
现实中，“逆概率” 问题更常见（如 “检测阳性” 反推 “是否患病”、“邮件含‘免费’” 反推 “是否为垃圾邮件”），但直接计算难度大，贝叶斯公式则提供了标准化的计算方法。
### 二、基础铺垫：条件概率与联合概率
贝叶斯公式由**条件概率公式**推导而来，因此必须先明确两个核心概念：
#### 1. 联合概率（Joint Probability）
表示 “事件 A 和事件 B 同时发生” 的概率，记为 $P(A \cap B)$ 或 $P(AB)$。
- 例：“摸出红球（A）且来自 A 箱（B）” 的概率，就是联合概率 $P(AB)$。
#### 2. 条件概率（Conditional Probability）
表示 “在事件 B 已经发生的前提下，事件 A 发生” 的概率，记为 $P(A|B)$（读作 “A given B”）。
- 直观理解：事件 B 发生后，样本空间缩小为 B 的范围，此时 A 发生的概率是 “AB 的交集” 占 “B 的总面积” 的比例。
- 公式定义：$P(A|B) = \frac{P(AB)}{P(B)} \quad (P(B) \neq 0)$ 同理，“在 A 发生的前提下 B 发生” 的条件概率为：$P(B|A) = \frac{P(AB)}{P(A)} \quad (P(A) \neq 0)$
### 三、贝叶斯公式的推导：从条件概率到核心公式
通过联合概率的 “双向表达”，可直接推导出贝叶斯公式：
1. 由条件概率公式变形，得到联合概率的两种等价表达：$P(AB) = P(A|B) \cdot P(B) = P(B|A) \cdot P(A)$
2. 将两式联立，解出 $P(A|B)$（这就是贝叶斯公式的核心形式）：$P(A|B) = \frac{P(B|A) \cdot P(A)}{P(B)}$
#### 更通用的 “多原因” 形式
现实中，“结果 B” 可能由多个互斥的 “原因”（如 A₁, A₂, ..., Aₙ）导致（例如 “检测阳性（B）” 可能由 “患病（A₁）” 或 “未患病（A₂）” 导致）。此时需用**全概率公式**计算 $P(B)$，代入贝叶斯公式得到更通用的形式：
##### 第一步：全概率公式（计算 P (B)）
若事件 A₁, A₂, ..., Aₙ满足：
- 互斥性：任意两个事件不能同时发生（如 “患病” 和 “未患病” 互斥）；
- 穷尽性：所有事件覆盖全部可能（如 “患病”+“未患病”= 所有情况）；
则 “结果 B 发生” 的总概率为各 “原因 Aᵢ导致 B” 的概率之和：$P(B) = \sum_\limits{i=1}^n P(B|A_i) \cdot P(A_i)$
##### 第二步：通用贝叶斯公式
将全概率公式代入核心形式，得到：$P(A_k|B) = \frac{P(B|A_k) \cdot P(A_k)}{\sum_\limits{i=1}^n P(B|A_i) \cdot P(A_i)}$ 其中，$P(A_k|B)$ 是我们最终想求的 “已知结果 B，反推原因 A_k 的概率”。